[{"/home/mahmoud/College/tazkarti/src/App.tsx":"1","/home/mahmoud/College/tazkarti/src/Routes/SignUp/index.tsx":"2","/home/mahmoud/College/tazkarti/src/Routes/Login/index.tsx":"3","/home/mahmoud/College/tazkarti/src/Routes/Home/index.tsx":"4","/home/mahmoud/College/tazkarti/src/Components/TopBar/index.tsx":"5","/home/mahmoud/College/tazkarti/src/Components/TopBar/GuestTopBar.tsx":"6","/home/mahmoud/College/tazkarti/src/Components/TopBar/FanTopBar.tsx":"7","/home/mahmoud/College/tazkarti/src/Components/TopBar/DefaultTopBar.tsx":"8","/home/mahmoud/College/tazkarti/src/Components/TopBar/AdminTopBar.tsx":"9","/home/mahmoud/College/tazkarti/src/Components/TopBar/ManagerTopBar.tsx":"10","/home/mahmoud/College/tazkarti/src/index.tsx":"11","/home/mahmoud/College/tazkarti/src/Services/Auth.ts":"12","/home/mahmoud/College/tazkarti/src/Routes/Logout/index.tsx":"13","/home/mahmoud/College/tazkarti/src/reportWebVitals.ts":"14","/home/mahmoud/College/tazkarti/src/Components/TopBar/EmptyTopBar.tsx":"15","/home/mahmoud/College/tazkarti/src/Components/Manager/Matches.tsx":"16","/home/mahmoud/College/tazkarti/src/Components/Manager/index.tsx":"17","/home/mahmoud/College/tazkarti/src/Components/Manager/CreateStadium.tsx":"18","/home/mahmoud/College/tazkarti/src/Utils/renderers.tsx":"19","/home/mahmoud/College/tazkarti/src/Services/Stadium.ts":"20","/home/mahmoud/College/tazkarti/src/Components/Manager/CreateMatch.tsx":"21","/home/mahmoud/College/tazkarti/src/Services/Team.ts":"22","/home/mahmoud/College/tazkarti/src/Services/Match.ts":"23","/home/mahmoud/College/tazkarti/src/Components/Manager/EditMatch.tsx":"24","/home/mahmoud/College/tazkarti/src/Components/Fan/Matches.tsx":"25","/home/mahmoud/College/tazkarti/src/Services/Ticket.ts":"26","/home/mahmoud/College/tazkarti/src/Components/Fan/index.tsx":"27","/home/mahmoud/College/tazkarti/src/Components/Fan/Tickets.tsx":"28","/home/mahmoud/College/tazkarti/src/Components/Fan/Edit.tsx":"29","/home/mahmoud/College/tazkarti/src/Components/Guest/index.tsx":"30","/home/mahmoud/College/tazkarti/src/Components/Admin/index.tsx":"31","/home/mahmoud/College/tazkarti/src/Services/Admin.ts":"32"},{"size":759,"mtime":1610528833490,"results":"33","hashOfConfig":"34"},{"size":7173,"mtime":1610622017502,"results":"35","hashOfConfig":"34"},{"size":3748,"mtime":1610622008874,"results":"36","hashOfConfig":"34"},{"size":1381,"mtime":1610623568598,"results":"37","hashOfConfig":"34"},{"size":728,"mtime":1610466054119,"results":"38","hashOfConfig":"34"},{"size":925,"mtime":1610622039014,"results":"39","hashOfConfig":"34"},{"size":1010,"mtime":1610614172933,"results":"40","hashOfConfig":"34"},{"size":784,"mtime":1610557427023,"results":"41","hashOfConfig":"34"},{"size":788,"mtime":1610557433299,"results":"42","hashOfConfig":"34"},{"size":1047,"mtime":1610557382511,"results":"43","hashOfConfig":"34"},{"size":500,"mtime":1609395196787,"results":"44","hashOfConfig":"34"},{"size":4617,"mtime":1610621589522,"results":"45","hashOfConfig":"34"},{"size":284,"mtime":1609534097482,"results":"46","hashOfConfig":"34"},{"size":425,"mtime":1609395196787,"results":"47","hashOfConfig":"34"},{"size":788,"mtime":1610557421223,"results":"48","hashOfConfig":"34"},{"size":3194,"mtime":1610613134201,"results":"49","hashOfConfig":"34"},{"size":541,"mtime":1610473296812,"results":"50","hashOfConfig":"34"},{"size":4060,"mtime":1610473118988,"results":"51","hashOfConfig":"34"},{"size":547,"mtime":1610472863572,"results":"52","hashOfConfig":"34"},{"size":1130,"mtime":1610475986404,"results":"53","hashOfConfig":"34"},{"size":7452,"mtime":1610530880974,"results":"54","hashOfConfig":"34"},{"size":408,"mtime":1610475997532,"results":"55","hashOfConfig":"34"},{"size":2744,"mtime":1610559318863,"results":"56","hashOfConfig":"34"},{"size":8533,"mtime":1610559381063,"results":"57","hashOfConfig":"34"},{"size":6329,"mtime":1610621935758,"results":"58","hashOfConfig":"34"},{"size":1703,"mtime":1610621856958,"results":"59","hashOfConfig":"34"},{"size":477,"mtime":1610619636966,"results":"60","hashOfConfig":"34"},{"size":3043,"mtime":1610619842078,"results":"61","hashOfConfig":"34"},{"size":7111,"mtime":1610631458846,"results":"62","hashOfConfig":"34"},{"size":2790,"mtime":1610621783650,"results":"63","hashOfConfig":"34"},{"size":2136,"mtime":1610624995494,"results":"64","hashOfConfig":"34"},{"size":1102,"mtime":1610624328134,"results":"65","hashOfConfig":"34"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},"13ngzlb",{"filePath":"69","messages":"70","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"71","messages":"72","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"77"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"77"},{"filePath":"80","messages":"81","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"77"},{"filePath":"86","messages":"87","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"77"},{"filePath":"88","messages":"89","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"90"},{"filePath":"91","messages":"92","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"77"},{"filePath":"93","messages":"94","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"95","messages":"96","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"77"},{"filePath":"97","messages":"98","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"90"},{"filePath":"99","messages":"100","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"101","messages":"102","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"103"},{"filePath":"104","messages":"105","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"106"},{"filePath":"107","messages":"108","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"90"},{"filePath":"109","messages":"110","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"111","messages":"112","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"103"},{"filePath":"113","messages":"114","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"77"},{"filePath":"115","messages":"116","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"117","messages":"118","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"90"},{"filePath":"119","messages":"120","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"121","usedDeprecatedRules":"77"},{"filePath":"122","messages":"123","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"124","messages":"125","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"77"},{"filePath":"126","messages":"127","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"128","messages":"129","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"130","messages":"131","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"132","messages":"133","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"134","messages":"135","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/home/mahmoud/College/tazkarti/src/App.tsx",[],["136","137"],"/home/mahmoud/College/tazkarti/src/Routes/SignUp/index.tsx",["138"],"/home/mahmoud/College/tazkarti/src/Routes/Login/index.tsx",["139"],"/home/mahmoud/College/tazkarti/src/Routes/Home/index.tsx",[],"/home/mahmoud/College/tazkarti/src/Components/TopBar/index.tsx",[],["140","141"],"/home/mahmoud/College/tazkarti/src/Components/TopBar/GuestTopBar.tsx",[],"/home/mahmoud/College/tazkarti/src/Components/TopBar/FanTopBar.tsx",[],"/home/mahmoud/College/tazkarti/src/Components/TopBar/DefaultTopBar.tsx",[],"/home/mahmoud/College/tazkarti/src/Components/TopBar/AdminTopBar.tsx",[],"/home/mahmoud/College/tazkarti/src/Components/TopBar/ManagerTopBar.tsx",[],"/home/mahmoud/College/tazkarti/src/index.tsx",[],["142","143"],"/home/mahmoud/College/tazkarti/src/Services/Auth.ts",[],"/home/mahmoud/College/tazkarti/src/Routes/Logout/index.tsx",[],"/home/mahmoud/College/tazkarti/src/reportWebVitals.ts",[],"/home/mahmoud/College/tazkarti/src/Components/TopBar/EmptyTopBar.tsx",[],"/home/mahmoud/College/tazkarti/src/Components/Manager/Matches.tsx",[],"/home/mahmoud/College/tazkarti/src/Components/Manager/index.tsx",[],["144","145"],"/home/mahmoud/College/tazkarti/src/Components/Manager/CreateStadium.tsx",[],["146","147"],"/home/mahmoud/College/tazkarti/src/Utils/renderers.tsx",[],"/home/mahmoud/College/tazkarti/src/Services/Stadium.ts",[],"/home/mahmoud/College/tazkarti/src/Components/Manager/CreateMatch.tsx",[],"/home/mahmoud/College/tazkarti/src/Services/Team.ts",[],"/home/mahmoud/College/tazkarti/src/Services/Match.ts",[],"/home/mahmoud/College/tazkarti/src/Components/Manager/EditMatch.tsx",[],"/home/mahmoud/College/tazkarti/src/Components/Fan/Matches.tsx",["148"],"import {\n  Box,\n  Table,\n  Grid,\n  TableRow,\n  TableCell,\n  Accordion,\n  AccordionDetails,\n  AccordionSummary,\n  TableContainer,\n  FormControlLabel,\n  Button,\n  Dialog,\n  TextField,\n  Typography,\n} from \"@material-ui/core\";\nimport { EventSeat, ExpandMore } from \"@material-ui/icons\";\nimport { navigate } from \"@reach/router\";\nimport React, { FC, useEffect, useState } from \"react\";\nimport { IMatch, ISeat } from \"../../Interfaces/Match\";\nimport { IStadium } from \"../../Interfaces/Stadium\";\nimport { ITeam } from \"../../Interfaces/Team\";\nimport { getMatches } from \"../../Services/Match\";\nimport { getStadiums } from \"../../Services/Stadium\";\nimport { getTeams } from \"../../Services/Team\";\nimport { buyTicket } from \"../../Services/Ticket\";\nimport { renderErrors, renderNotices } from \"../../Utils/renderers\";\n\nfunction get2DArray(seats: ISeat[] = []): ISeat[][] {\n  return seats.reduce((acc, curr) => {\n    const newArr = acc;\n    if (!acc[curr.x]) {\n      newArr[curr.x] = [];\n    }\n    newArr[curr.x].push(curr);\n    return newArr;\n  }, [] as ISeat[][]);\n}\n\nlet timer: any;\n\nfunction shortPoll(setter: (matches: IMatch[]) => void) {\n  getMatches().then((matches) => {\n    setter(matches);\n    timer = window.setTimeout(() => {\n      shortPoll(setter);\n    }, 4000);\n  });\n}\n\nexport const Matches: FC = () => {\n  const [matches, setMatches] = useState<IMatch[]>([]);\n  const [stadiums, setStadiums] = useState<IStadium[]>([]);\n  const [teams, setTeams] = useState<ITeam[]>([]);\n  const [activeMatch, setActiveMatch] = useState<string>(\"\");\n  const [selectedX, setSelectedX] = useState<number>();\n  const [selectedY, setSelectedY] = useState<number>();\n  const [buyErrors, setBuyErrors] = useState<string[]>([]);\n  const [buyNotices, setBuyNotices] = useState<string[]>([]);\n  const [isLoadingBuy, setIsLoadingBuy] = useState(false);\n  const [ccNum, setCcNum] = useState(\"\");\n  const [pinNum, setPinNum] = useState(\"\");\n\n  useEffect(() => {\n    getStadiums().then(setStadiums);\n    getTeams().then(setTeams);\n  }, []);\n\n  useEffect(() => {\n    shortPoll(setMatches);\n    return () => {\n      if (timer) {\n        window.clearTimeout(timer);\n      }\n    };\n  }, []);\n\n  function getTitle(match: IMatch): string {\n    const stadium = stadiums.find((std) => std.id === match.stadium);\n    const awayTeam = teams.find((t) => t.id === match.awayTeam);\n    const homeTeam = teams.find((t) => t.id === match.homeTeam);\n    return `${stadium?.name} - ${awayTeam?.teamName} vs ${\n      homeTeam?.teamName\n    } - ${new Date(match.time).toLocaleString()}`;\n  }\n\n  function getClickHandler(matchId: string, x: number, y: number): () => void {\n    return (): void => {\n      setActiveMatch(matchId);\n      setSelectedX(x);\n      setSelectedY(y);\n    };\n  }\n\n  return (\n    <>\n      <Box p={4}>\n        {matches.map((match) => (\n          <Accordion>\n            <AccordionSummary expandIcon={<ExpandMore />}>\n              <FormControlLabel control={<> </>} label={getTitle(match)} />\n            </AccordionSummary>\n            <AccordionDetails>\n              <TableContainer>\n                <Table>\n                  {get2DArray(match.seats).map((row, i) => (\n                    <TableRow>\n                      {row.map(({ isReserved }, j) => (\n                        <TableCell>\n                          <Button\n                            onClick={getClickHandler(match?.id || \"\", i, j)}\n                            color=\"primary\"\n                            disabled={isReserved}\n                            variant=\"text\"\n                          >\n                            <EventSeat />\n                          </Button>\n                        </TableCell>\n                      ))}\n                    </TableRow>\n                  ))}\n                </Table>\n              </TableContainer>\n            </AccordionDetails>\n          </Accordion>\n        ))}\n      </Box>\n      <Dialog open={activeMatch.length > 0} maxWidth=\"sm\">\n        <Box p={4}>\n          <Box paddingBottom={2}>\n            <Typography variant=\"h6\">\n              Buy ({selectedX}, {selectedY}) Ticket for:{\" \"}\n              {matches.find(({ id }) => id === activeMatch)?.ticketPrice} EGP\n            </Typography>\n          </Box>\n          {renderErrors(buyErrors)}\n          {renderNotices(buyNotices)}\n          <TextField\n            fullWidth\n            disabled={isLoadingBuy}\n            label=\"Credit Card number (16-digit)\"\n            variant=\"outlined\"\n            onBlur={({ target }) => {\n              setCcNum(target.value);\n            }}\n          />\n          <Box p={1} />\n          <TextField\n            fullWidth\n            disabled={isLoadingBuy}\n            label=\"Pin Number (4-digits)\"\n            variant=\"outlined\"\n            onBlur={({ target }) => {\n              setPinNum(target.value);\n            }}\n          />\n          <Box p={1} />\n          <Grid container spacing={2} justify=\"center\" alignItems=\"center\">\n            <Grid item xs={6}>\n              <Button\n                fullWidth\n                disabled={isLoadingBuy}\n                color=\"primary\"\n                variant=\"contained\"\n                onClick={async () => {\n                  setIsLoadingBuy(true);\n                  const errors = await buyTicket(activeMatch, {\n                    x: selectedX !== undefined ? selectedX : -1,\n                    y: selectedY !== undefined ? selectedY : -1,\n                    creditCard: ccNum,\n                    pin: pinNum,\n                  });\n                  setIsLoadingBuy(false);\n                  if (errors.length) {\n                    setBuyErrors(errors);\n                    return;\n                  }\n                  navigate(\"/tickets\");\n                }}\n              >\n                Buy Now!\n              </Button>\n            </Grid>\n            <Grid item xs={6}>\n              <Button\n                disabled={isLoadingBuy}\n                color=\"primary\"\n                fullWidth\n                variant=\"outlined\"\n                onClick={() => {\n                  setActiveMatch(\"\");\n                  setSelectedX(-1);\n                  setSelectedY(-1);\n                }}\n              >\n                Cancel\n              </Button>\n            </Grid>\n          </Grid>\n        </Box>\n      </Dialog>\n    </>\n  );\n};\n\nexport default Matches;\n","/home/mahmoud/College/tazkarti/src/Services/Ticket.ts",[],"/home/mahmoud/College/tazkarti/src/Components/Fan/index.tsx",[],"/home/mahmoud/College/tazkarti/src/Components/Fan/Tickets.tsx",[],"/home/mahmoud/College/tazkarti/src/Components/Fan/Edit.tsx",["149","150","151"],"/home/mahmoud/College/tazkarti/src/Components/Guest/index.tsx",[],"/home/mahmoud/College/tazkarti/src/Components/Admin/index.tsx",[],"/home/mahmoud/College/tazkarti/src/Services/Admin.ts",[],{"ruleId":"152","replacedBy":"153"},{"ruleId":"154","replacedBy":"155"},{"ruleId":"156","severity":1,"message":"157","line":11,"column":10,"nodeType":"158","messageId":"159","endLine":11,"endColumn":15},{"ruleId":"156","severity":1,"message":"157","line":10,"column":10,"nodeType":"158","messageId":"159","endLine":10,"endColumn":15},{"ruleId":"152","replacedBy":"160"},{"ruleId":"154","replacedBy":"161"},{"ruleId":"152","replacedBy":"162"},{"ruleId":"154","replacedBy":"163"},{"ruleId":"152","replacedBy":"164"},{"ruleId":"154","replacedBy":"165"},{"ruleId":"152","replacedBy":"166"},{"ruleId":"154","replacedBy":"167"},{"ruleId":"156","severity":1,"message":"168","line":59,"column":22,"nodeType":"158","messageId":"159","endLine":59,"endColumn":35},{"ruleId":"156","severity":1,"message":"169","line":11,"column":10,"nodeType":"158","messageId":"159","endLine":11,"endColumn":14},{"ruleId":"156","severity":1,"message":"170","line":13,"column":8,"nodeType":"158","messageId":"159","endLine":13,"endColumn":14},{"ruleId":"156","severity":1,"message":"171","line":14,"column":29,"nodeType":"158","messageId":"159","endLine":14,"endColumn":35},"no-native-reassign",["172"],"no-negated-in-lhs",["173"],"@typescript-eslint/no-unused-vars","'Alert' is defined but never used.","Identifier","unusedVar",["172"],["173"],["172"],["173"],["172"],["173"],["172"],["173"],"'setBuyNotices' is assigned a value but never used.","'Link' is defined but never used.","'TopBar' is defined but never used.","'signup' is defined but never used.","no-global-assign","no-unsafe-negation"]